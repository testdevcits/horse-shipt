"use strict";(self.webpackChunkhorse_shipt_frontend=self.webpackChunkhorse_shipt_frontend||[]).push([[675],{383:(e,t,a)=>{a.d(t,{A:()=>s});a(43);var r=a(579);const s=e=>{let{label:t,type:a="text",placeholder:s="",value:o,onChange:l,className:n=""}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1 ".concat(n),children:[t&&(0,r.jsx)("label",{className:"text-gray-700 font-medium text-sm",children:t}),(0,r.jsx)("input",{type:a,placeholder:s,value:o,onChange:l,className:"w-full border border-gray-300 rounded-md px-3 py-1.5 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})]})}},675:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var r=a(43),s=a(216),o=a(892),l=a(899),n=a(383),i=a(835),c=a(916),d=a(832),m=a(58),u=a(16),p=a(91),x=a(579);const g={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"https://horse-shipt-frontend.vercel.app/api",h=()=>{const e=(0,s.Zp)(),t=(0,s.zy)(),{login:a}=(0,u.A)(),[h,f]=(0,r.useState)(null),[y,v]=(0,r.useState)("shipper"),b=l.Ik({name:l.Yj().required("Name is required"),email:l.Yj().email("Invalid email").required("Required"),password:l.Yj().min(8,"Minimum 8 characters").matches(/[A-Z]/,"Must contain an uppercase letter").matches(/[a-z]/,"Must contain a lowercase letter").matches(/\d/,"Must contain a number").matches(/[@$!%*?&]/,"Must contain a special character").required("Required"),confirmPassword:l.Yj().oneOf([l.KR("password"),null],"Passwords must match").required("Required"),role:l.Yj().oneOf(["shipper","customer"]).required("Required")});(0,r.useEffect)(()=>{const r=new URLSearchParams(t.search),s=r.get("error");s&&f({message:decodeURIComponent(s),type:"error"});const o=r.get("token");if(o){const t={_id:r.get("id"),role:r.get("role"),name:r.get("name"),email:r.get("email"),photo:r.get("photo")||"",provider:r.get("provider"),providerId:r.get("providerId"),firstName:r.get("firstName")||"",lastName:r.get("lastName")||"",locale:r.get("locale")||""},s={authToken:o,authUser:t,token:o,tokenExpiry:Date.now()+36e5};localStorage.setItem("authData",JSON.stringify(s)),a(t,o,3600),e("shipper"===t.role?"/shipper/dashboard":"/customer/dashboard")}},[t.search,a,e]);const w=()=>{window.location.href="".concat(g,"/auth/google?role=").concat(y)};return(0,x.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center font-montserrat p-4",style:{backgroundImage:"url(".concat(d,")")},children:[(0,x.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center w-full max-w-6xl gap-20",children:[(0,x.jsx)("div",{className:"flex items-center justify-center w-full md:w-[450px] h-[150px]",children:(0,x.jsxs)("svg",{width:"120",height:"120",viewBox:"0 0 64 64",fill:"none",children:[(0,x.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"#E5E7EB"}),(0,x.jsx)("path",{d:"M32 16L40 32H24L32 16Z",fill:"#1E40AF"}),(0,x.jsx)("circle",{cx:"32",cy:"42",r:"4",fill:"#1E40AF"})]})}),(0,x.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-6 md:p-8 shadow-md flex flex-col justify-center w-full max-w-sm gap-4",children:[(0,x.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold text-start text-gray-800",children:"Create Account"}),(0,x.jsxs)("p",{className:"text-xs text-gray-600",children:["Already have an account?"," ",(0,x.jsx)("span",{className:"text-[#BF9B53] font-medium cursor-pointer px-2 py-1 rounded hover:underline",onClick:()=>e("/login"),children:"Login"})]}),(0,x.jsx)(o.l1,{initialValues:{name:"",email:"",password:"",confirmPassword:"",role:"shipper"},validationSchema:b,onSubmit:async(t,r)=>{let{setSubmitting:s,resetForm:o}=r;s(!0);try{const r=(await p.A.post("".concat(g,"/auth/signup"),{name:t.name,email:t.email,password:t.password,role:y})).data;if(r.success){const t=r.data,s={_id:t._id,role:t.role,name:t.name||"",email:t.email||"",photo:t.profilePicture||"",provider:t.provider||"",providerId:t.providerId||"",firstName:t.firstName||"",lastName:t.lastName||"",locale:t.locale||"",isLogin:t.isLogin,isActive:t.isActive},l={authToken:t.token,authUser:s,token:t.token,tokenExpiry:Date.now()+36e5};localStorage.setItem("authData",JSON.stringify(l)),a(s,t.token,3600),f({message:"Signup successful!",type:"info"}),o(),e("shipper"===t.role?"/shipper/dashboard":"/customer/dashboard")}else{var l;f({message:(null===(l=r.errors)||void 0===l?void 0:l[0])||r.message||"Signup failed",type:"error"})}}catch(u){var n,i,c,d,m;console.error(u),f({message:(null===(n=u.response)||void 0===n||null===(i=n.data)||void 0===i||null===(c=i.errors)||void 0===c?void 0:c[0])||(null===(d=u.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.message)||"Signup error",type:"error"})}finally{s(!1)}},children:e=>{let{values:t,setFieldValue:a,isValid:r,dirty:s,isSubmitting:l}=e;return(0,x.jsxs)(o.lV,{className:"flex flex-col gap-3",children:[(0,x.jsx)(n.A,{label:"Name",type:"text",placeholder:"Enter your name",value:t.name,onChange:e=>a("name",e.target.value)}),(0,x.jsx)(o.Kw,{name:"name",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)(n.A,{label:"Email",type:"email",placeholder:"Enter your email",value:t.email,onChange:e=>a("email",e.target.value)}),(0,x.jsx)(o.Kw,{name:"email",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)(n.A,{label:"Password",type:"password",placeholder:"Enter your password",value:t.password,onChange:e=>a("password",e.target.value)}),(0,x.jsx)(o.Kw,{name:"password",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)(n.A,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:t.confirmPassword,onChange:e=>a("confirmPassword",e.target.value)}),(0,x.jsx)(o.Kw,{name:"confirmPassword",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)("div",{className:"flex gap-2",children:["shipper","customer"].map(e=>(0,x.jsx)("button",{type:"button",className:"flex-1 py-1 text-xs font-medium rounded ".concat(y===e?"bg-[#BF9B53] text-white":"bg-gray-200 text-gray-700"),onClick:()=>v(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)(i.A,{type:"submit",disabled:!(r&&s)||l,className:"px-4 py-1.5 text-xs rounded-md ".concat(r&&s?"bg-[#BF9B53] text-white hover:bg-[#a6813f]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Signup"})}),(0,x.jsx)("div",{className:"flex flex-col gap-2 mt-4",children:(0,x.jsxs)(i.A,{className:"w-full flex items-center justify-center border border-gray-300  text-black  gap-2 rounded-full text-xs py-1.5",onClick:w,children:[(0,x.jsx)(m.F4b,{size:16})," Continue with Google"]})})]})}})]})]}),h&&(0,x.jsx)(c.A,{message:h.message,type:h.type,onClose:()=>f(null)})]})}},832:(e,t,a)=>{e.exports=a.p+"static/media/authPage.e4bde5e6878fbff67b6e.jpg"},835:(e,t,a)=>{a.d(t,{A:()=>s});a(43);var r=a(579);const s=e=>{let{children:t,onClick:a,type:s="button",variant:o="primary",fullWidth:l=!1,rounded:n=!1,disabled:i=!1,className:c=""}=e;const d=l?"w-full":"",m=n?"rounded-full":"rounded-md",u="".concat("px-4 py-1.5 text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2"," ").concat(d," ").concat(m," ").concat("focus:outline-none focus:ring-2 focus:ring-[#BF9B53]"," ").concat(i?"bg-gray-400 cursor-not-allowed text-white":{primary:"bg-[#BF9B53] hover:bg-[#a6813f] text-white",secondary:"bg-gray-300 hover:bg-gray-400 text-gray-700",google:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100",facebook:"bg-[#1877F2] hover:bg-[#155db2] text-white",apple:"bg-black hover:bg-gray-900 text-white"}[o]," ").concat(c);return(0,r.jsx)("button",{type:s,onClick:a,disabled:i,className:u,children:t})}}}]);
//# sourceMappingURL=675.42e5dd65.chunk.js.map