"use strict";(self.webpackChunkhorse_shipt_frontend=self.webpackChunkhorse_shipt_frontend||[]).push([[980],{383:(e,t,s)=>{s.d(t,{A:()=>r});s(43);var a=s(579);const r=e=>{let{label:t,type:s="text",placeholder:r="",value:l,onChange:o,className:n=""}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1 ".concat(n),children:[t&&(0,a.jsx)("label",{className:"text-gray-700 font-medium text-sm",children:t}),(0,a.jsx)("input",{type:s,placeholder:r,value:l,onChange:o,className:"w-full border border-gray-300 rounded-md px-3 py-1.5 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})]})}},832:(e,t,s)=>{e.exports=s.p+"static/media/authPage.e4bde5e6878fbff67b6e.jpg"},835:(e,t,s)=>{s.d(t,{A:()=>r});s(43);var a=s(579);const r=e=>{let{children:t,onClick:s,type:r="button",variant:l="primary",fullWidth:o=!1,rounded:n=!1,disabled:i=!1,className:c=""}=e;const d=o?"w-full":"",u=n?"rounded-full":"rounded-md",x="".concat("px-4 py-1.5 text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2"," ").concat(d," ").concat(u," ").concat("focus:outline-none focus:ring-2 focus:ring-[#BF9B53]"," ").concat(i?"bg-gray-400 cursor-not-allowed text-white":{primary:"bg-[#BF9B53] hover:bg-[#a6813f] text-white",secondary:"bg-gray-300 hover:bg-gray-400 text-gray-700",google:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100",facebook:"bg-[#1877F2] hover:bg-[#155db2] text-white",apple:"bg-black hover:bg-gray-900 text-white"}[l]," ").concat(c);return(0,a.jsx)("button",{type:r,onClick:s,disabled:i,className:x,children:t})}},980:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(43),r=s(16),l=s(216),o=s(892),n=s(899),i=s(835),c=s(383),d=s(916),u=s(832),x=s(58),p=s(184),g=s(462),m=s(91),h=s(579);const f={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:5000/api",b=()=>{const{login:e}=(0,r.A)(),t=(0,l.Zp)(),s=(0,l.zy)(),[b,y]=(0,a.useState)(null),[v,w]=(0,a.useState)(!1),j=n.Ik({email:n.Yj().email("Invalid email").required("Required"),password:n.Yj().required("Required"),role:n.Yj().oneOf(["shipper","customer"]).required("Required")});(0,a.useEffect)(()=>{const e=new URLSearchParams(s.search).get("error");e&&y({message:decodeURIComponent(e),type:"error"})},[s.search]);const N=async(s,a)=>{try{w(!0);const r=await m.A.post("".concat(f,"/auth/oauth"),{provider:s,role:a});if(r.data.success){const s=r.data.data;if(!s.isActive)return void y({message:"Account is blocked",type:"error"});e(s,s.token,3600),t("shipper"===s.role?"/shipper/dashboard":"/customer/dashboard")}else y({message:r.data.message||"User does not exist",type:"error"})}catch(n){var r,l,o;console.error(n),y({message:(null===(r=n.response)||void 0===r||null===(l=r.data)||void 0===l||null===(o=l.errors)||void 0===o?void 0:o[0])||"OAuth login failed. User may not exist.",type:"error"})}finally{w(!1)}};return(0,h.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center font-montserrat p-4",style:{backgroundImage:"url(".concat(u,")")},children:[(0,h.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center w-full max-w-6xl gap-20",children:[(0,h.jsx)("div",{className:"flex items-center justify-center w-full md:w-[450px] h-[150px]",children:(0,h.jsxs)("svg",{width:"120",height:"120",viewBox:"0 0 64 64",fill:"none",children:[(0,h.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"#E5E7EB"}),(0,h.jsx)("path",{d:"M32 16L40 32H24L32 16Z",fill:"#1E40AF"}),(0,h.jsx)("circle",{cx:"32",cy:"42",r:"4",fill:"#1E40AF"})]})}),(0,h.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-6 md:p-8 shadow-md flex flex-col justify-center w-full max-w-sm gap-4",children:[(0,h.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold text-start text-gray-800",children:"Welcome Back"}),(0,h.jsxs)("p",{className:"text-xs text-gray-600",children:["Don't have an account?"," ",(0,h.jsx)("span",{className:"text-[#BF9B53] font-medium cursor-pointer px-2 py-1 rounded hover:bg-[#bf9b5360] hover:text-black",onClick:()=>t("/signup"),children:"Create an account"})]}),(0,h.jsx)(o.l1,{initialValues:{email:"",password:"",role:"shipper"},validationSchema:j,onSubmit:async(s,a)=>{let{setSubmitting:r}=a;w(!0);try{const{data:a}=await m.A.post("".concat(f,"/auth/login"),s);a.success?(e(a.data,a.data.token,3600),y({message:"Logged in successfully!",type:"info"}),t("shipper"===a.data.role?"/shipper/dashboard":"/customer/dashboard")):y({message:a.message||"Login failed",type:"error"})}catch(i){var l,o,n;console.error(i),y({message:(null===(l=i.response)||void 0===l||null===(o=l.data)||void 0===o||null===(n=o.errors)||void 0===n?void 0:n[0])||"Login error",type:"error"})}finally{r(!1),w(!1)}},children:e=>{let{values:t,setFieldValue:s,isValid:a,dirty:r,isSubmitting:l}=e;return(0,h.jsxs)(o.lV,{className:"flex flex-col gap-3",children:[(0,h.jsx)(c.A,{label:"Email",type:"email",placeholder:"Enter your email",value:t.email,onChange:e=>s("email",e.target.value)}),(0,h.jsx)(o.Kw,{name:"email",component:"div",className:"text-xs text-red-500"}),(0,h.jsx)(c.A,{label:"Password",type:"password",placeholder:"Enter your password",value:t.password,onChange:e=>s("password",e.target.value)}),(0,h.jsx)(o.Kw,{name:"password",component:"div",className:"text-xs text-red-500"}),(0,h.jsx)("div",{className:"flex gap-2",children:["shipper","customer"].map(e=>(0,h.jsx)("button",{type:"button",className:"flex-1 py-1 text-xs font-medium rounded ".concat(t.role===e?"bg-[#BF9B53] text-white":"bg-gray-200 text-gray-700"),onClick:()=>s("role",e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,h.jsx)(o.Kw,{name:"role",component:"div",className:"text-xs text-red-500"}),(0,h.jsx)("div",{className:"flex justify-end",children:(0,h.jsx)(i.A,{type:"submit",disabled:!(a&&r)||l||v,className:"px-4 py-1.5 text-xs rounded-md ".concat(a&&r?"bg-[#BF9B53] text-white hover:bg-[#a6813f]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:v?"Logging in...":"Login"})}),(0,h.jsxs)("div",{className:"flex flex-col gap-2 mt-3",children:[(0,h.jsxs)(i.A,{className:"w-full flex items-center justify-center bg-black text-white hover:bg-gray-900 gap-2 rounded-full text-xs py-1.5",onClick:()=>N("apple",t.role),children:[(0,h.jsx)(g.owP,{size:14})," Continue with Apple"]}),(0,h.jsxs)(i.A,{className:"w-full flex items-center justify-center border border-gray-300 bg-white text-gray-700 hover:bg-gray-100 gap-2 rounded-full text-xs py-1.5",onClick:()=>N("google",t.role),children:[(0,h.jsx)(x.F4b,{size:16})," Continue with Google"]}),(0,h.jsxs)(i.A,{className:"w-full flex items-center justify-center bg-[#1877F2] text-white hover:bg-[#155db2] gap-2 rounded-full text-xs py-1.5",onClick:()=>N("facebook",t.role),children:[(0,h.jsx)(p.ok6,{size:14,color:"#fff"})," Continue with Facebook"]})]})]})}})]})]}),b&&(0,h.jsx)(d.A,{message:b.message,type:b.type,onClose:()=>y(null)})]})}}}]);
//# sourceMappingURL=980.dc8c8b9d.chunk.js.map