"use strict";(self.webpackChunkhorse_shipt_frontend=self.webpackChunkhorse_shipt_frontend||[]).push([[675],{383:(e,a,t)=>{t.d(a,{A:()=>r});t(43);var s=t(579);const r=e=>{let{label:a,type:t="text",placeholder:r="",value:o,onChange:l,className:n=""}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-1 ".concat(n),children:[a&&(0,s.jsx)("label",{className:"text-gray-700 font-medium text-sm",children:a}),(0,s.jsx)("input",{type:t,placeholder:r,value:o,onChange:l,className:"w-full border border-gray-300 rounded-md px-3 py-1.5 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})]})}},675:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(43),r=t(216),o=t(892),l=t(899),n=t(383),i=t(835),c=t(916),d=t(832),m=t(58),u=t(16),p=t(91),x=t(579);const g={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:5000/api",h=()=>{const e=(0,r.Zp)(),a=(0,r.zy)(),{login:t}=(0,u.A)(),[h,f]=(0,s.useState)(null),[y,b]=(0,s.useState)("shipper"),v=l.Ik({name:l.Yj().required("Name is required"),email:l.Yj().email("Invalid email").required("Required"),password:l.Yj().min(6,"Minimum 6 characters").required("Required"),confirmPassword:l.Yj().oneOf([l.KR("password"),null],"Passwords must match").required("Required"),role:l.Yj().oneOf(["shipper","customer"]).required("Required")});(0,s.useEffect)(()=>{const e=new URLSearchParams(a.search).get("error");e&&f({message:decodeURIComponent(e),type:"error"})},[a.search]);const w=()=>{window.location.href="".concat(g,"/auth/google?role=").concat(y)};return(0,x.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center font-montserrat p-4",style:{backgroundImage:"url(".concat(d,")")},children:[(0,x.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center w-full max-w-6xl gap-20",children:[(0,x.jsx)("div",{className:"flex items-center justify-center w-full md:w-[450px] h-[150px]",children:(0,x.jsxs)("svg",{width:"120",height:"120",viewBox:"0 0 64 64",fill:"none",children:[(0,x.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"#E5E7EB"}),(0,x.jsx)("path",{d:"M32 16L40 32H24L32 16Z",fill:"#1E40AF"}),(0,x.jsx)("circle",{cx:"32",cy:"42",r:"4",fill:"#1E40AF"})]})}),(0,x.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-6 md:p-8 shadow-md flex flex-col justify-center w-full max-w-sm gap-4",children:[(0,x.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold text-start text-gray-800",children:"Create Account"}),(0,x.jsxs)("p",{className:"text-xs text-gray-600",children:["Already have an account?"," ",(0,x.jsx)("span",{className:"text-[#BF9B53] font-medium cursor-pointer px-2 py-1 rounded hover:underline",onClick:()=>e("/login"),children:"Login"})]}),(0,x.jsx)(o.l1,{initialValues:{name:"",email:"",password:"",confirmPassword:"",role:"shipper"},validationSchema:v,onSubmit:async(a,s)=>{let{setSubmitting:r,resetForm:o}=s;r(!0);try{const s=(await p.A.post("".concat(g,"/auth/signup"),{name:a.name,email:a.email,password:a.password,role:y})).data;if(s.success){const a=s.data,r={_id:a._id,role:a.role,name:a.name||"",email:a.email||"",photo:a.profilePicture||"",provider:a.provider||"",providerId:a.providerId||"",firstName:a.firstName||"",lastName:a.lastName||"",locale:a.locale||"",isLogin:a.isLogin,isActive:a.isActive},l={authToken:a.token,authUser:r,token:a.token,tokenExpiry:Date.now()+36e5};localStorage.setItem("authData",JSON.stringify(l)),t(r,a.token,3600),f({message:"Signup successful!",type:"info"}),o(),e("shipper"===a.role?"/shipper/dashboard":"/customer/dashboard")}else f({message:s.message||"Signup failed",type:"error"})}catch(m){var l,n,i,c,d;console.error(m),f({message:(null===(l=m.response)||void 0===l||null===(n=l.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i[0])||(null===(c=m.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||"Signup error",type:"error"})}finally{r(!1)}},children:e=>{let{values:a,setFieldValue:t,isValid:s,dirty:r,isSubmitting:l}=e;return(0,x.jsxs)(o.lV,{className:"flex flex-col gap-3",children:[(0,x.jsx)(n.A,{label:"Name",type:"text",placeholder:"Enter your name",value:a.name,onChange:e=>t("name",e.target.value)}),(0,x.jsx)(o.Kw,{name:"name",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)(n.A,{label:"Email",type:"email",placeholder:"Enter your email",value:a.email,onChange:e=>t("email",e.target.value)}),(0,x.jsx)(o.Kw,{name:"email",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)(n.A,{label:"Password",type:"password",placeholder:"Enter your password",value:a.password,onChange:e=>t("password",e.target.value)}),(0,x.jsx)(o.Kw,{name:"password",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)(n.A,{label:"Confirm Password",type:"password",placeholder:"Confirm your password",value:a.confirmPassword,onChange:e=>t("confirmPassword",e.target.value)}),(0,x.jsx)(o.Kw,{name:"confirmPassword",component:"div",className:"text-xs text-red-500"}),(0,x.jsx)("div",{className:"flex gap-2",children:["shipper","customer"].map(e=>(0,x.jsx)("button",{type:"button",className:"flex-1 py-1 text-xs font-medium rounded ".concat(y===e?"bg-[#BF9B53] text-white":"bg-gray-200 text-gray-700"),onClick:()=>b(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,x.jsx)("div",{className:"flex justify-end",children:(0,x.jsx)(i.A,{type:"submit",disabled:!(s&&r)||l,className:"px-4 py-1.5 text-xs rounded-md ".concat(s&&r?"bg-[#BF9B53] text-white hover:bg-[#a6813f]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Signup"})}),(0,x.jsx)("div",{className:"flex flex-col gap-2 mt-4",children:(0,x.jsxs)(i.A,{className:"w-full flex items-center justify-center border border-gray-300 bg-white text-black hover:bg-gray-100 gap-2 rounded-full text-xs py-1.5",onClick:w,children:[(0,x.jsx)(m.F4b,{size:16})," Continue with Google"]})})]})}})]})]}),h&&(0,x.jsx)(c.A,{message:h.message,type:h.type,onClose:()=>f(null)})]})}},832:(e,a,t)=>{e.exports=t.p+"static/media/authPage.e4bde5e6878fbff67b6e.jpg"},835:(e,a,t)=>{t.d(a,{A:()=>r});t(43);var s=t(579);const r=e=>{let{children:a,onClick:t,type:r="button",variant:o="primary",fullWidth:l=!1,rounded:n=!1,disabled:i=!1,className:c=""}=e;const d=l?"w-full":"",m=n?"rounded-full":"rounded-md",u="".concat("px-4 py-1.5 text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2"," ").concat(d," ").concat(m," ").concat("focus:outline-none focus:ring-2 focus:ring-[#BF9B53]"," ").concat(i?"bg-gray-400 cursor-not-allowed text-white":{primary:"bg-[#BF9B53] hover:bg-[#a6813f] text-white",secondary:"bg-gray-300 hover:bg-gray-400 text-gray-700",google:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100",facebook:"bg-[#1877F2] hover:bg-[#155db2] text-white",apple:"bg-black hover:bg-gray-900 text-white"}[o]," ").concat(c);return(0,s.jsx)("button",{type:r,onClick:t,disabled:i,className:u,children:a})}}}]);
//# sourceMappingURL=675.ef2acfec.chunk.js.map