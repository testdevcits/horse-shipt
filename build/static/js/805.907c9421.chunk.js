"use strict";(self.webpackChunkhorse_shipt_frontend=self.webpackChunkhorse_shipt_frontend||[]).push([[805],{805:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var r=s(43),i=s(216),o=s(16),a=s(916),n=s(579);const l=()=>{const e=(0,i.Zp)(),{login:t}=(0,o.A)(),s=(0,i.zy)().search,[l,g]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const r=new URLSearchParams(s),i=r.get("token"),o=r.get("role");if(!i||!o)return g({message:"OAuth login failed. Redirecting...",type:"error"}),void setTimeout(()=>e("/login"),1500);const a={_id:r.get("_id")||"",role:o,name:r.get("name")||"",email:r.get("email")||"",photo:r.get("photo")||"",provider:r.get("provider")||"",providerId:r.get("providerId")||"",firstName:r.get("firstName")||"",lastName:r.get("lastName")||"",locale:r.get("locale")||"",isLogin:"true"===r.get("isLogin"),isActive:"false"!==r.get("isActive")},n={authToken:i,authUser:a,token:i,tokenExpiry:Date.now()+36e5};localStorage.setItem("authData",JSON.stringify(n)),t(a,i,3600),g({message:"Logged in successfully!",type:"info"});const l="shipper"===o?"/shipper/dashboard":"/customer/dashboard",c=setTimeout(()=>e(l),1e3);return()=>clearTimeout(c)},[s,t,e]),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:l?(0,n.jsx)(a.A,{message:l.message,type:l.type,onClose:()=>g(null)}):(0,n.jsx)("p",{className:"text-gray-600",children:"Logging in..."})})}}}]);
//# sourceMappingURL=805.907c9421.chunk.js.map