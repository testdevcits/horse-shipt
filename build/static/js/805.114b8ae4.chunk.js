"use strict";(self.webpackChunkhorse_shipt_frontend=self.webpackChunkhorse_shipt_frontend||[]).push([[805],{805:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s(43),a=s(216),r=s(16),o=s(916),n=s(579);const l=()=>{const e=(0,a.Zp)(),{login:t}=(0,r.A)(),s=(0,a.zy)().search,[l,g]=(0,i.useState)(null);return(0,i.useEffect)(()=>{const i=new URLSearchParams(s),a=i.get("token"),r=i.get("role"),o=i.get("_id")||"",n=i.get("name")||"",l=i.get("email")||"",c=i.get("photo")||"",d=i.get("provider")||"",h=i.get("providerId")||"",p=i.get("firstName")||"",m=i.get("lastName")||"",u=i.get("locale")||"",f="true"===i.get("isLogin"),y="false"!==i.get("isActive");if(a&&r){const s={_id:o,role:r,name:n,email:l,photo:c,provider:d,providerId:h,firstName:p,lastName:m,locale:u,isLogin:f,isActive:y},i={authToken:a,authUser:s,token:a,tokenExpiry:Date.now()+36e5};localStorage.setItem("authData",JSON.stringify(i)),t(s,a,3600),g({message:"Logged in successfully!",type:"info"}),setTimeout(()=>{e("shipper"===r?"/shipper/dashboard":"/customer/dashboard")},1e3)}else g({message:"OAuth login failed. Redirecting...",type:"error"}),setTimeout(()=>e("/login"),1500)},[s,t,e]),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:l?(0,n.jsx)(o.A,{message:l.message,type:l.type,onClose:()=>g(null)}):(0,n.jsx)("p",{className:"text-gray-600",children:"Logging in..."})})}}}]);
//# sourceMappingURL=805.114b8ae4.chunk.js.map