"use strict";(self.webpackChunkhorse_shipt_frontend=self.webpackChunkhorse_shipt_frontend||[]).push([[980],{383:(e,t,a)=>{a.d(t,{A:()=>s});a(43);var r=a(579);const s=e=>{let{label:t,type:a="text",placeholder:s="",value:o,onChange:l,className:i=""}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1 ".concat(i),children:[t&&(0,r.jsx)("label",{className:"text-gray-700 font-medium text-sm",children:t}),(0,r.jsx)("input",{type:a,placeholder:s,value:o,onChange:l,className:"w-full border border-gray-300 rounded-md px-3 py-1.5 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})]})}},832:(e,t,a)=>{e.exports=a.p+"static/media/authPage.e4bde5e6878fbff67b6e.jpg"},835:(e,t,a)=>{a.d(t,{A:()=>s});a(43);var r=a(579);const s=e=>{let{children:t,onClick:a,type:s="button",variant:o="primary",fullWidth:l=!1,rounded:i=!1,disabled:n=!1,className:c=""}=e;const d=l?"w-full":"",m=i?"rounded-full":"rounded-md",p="".concat("px-4 py-1.5 text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2"," ").concat(d," ").concat(m," ").concat("focus:outline-none focus:ring-2 focus:ring-[#BF9B53]"," ").concat(n?"bg-gray-400 cursor-not-allowed text-white":{primary:"bg-[#BF9B53] hover:bg-[#a6813f] text-white",secondary:"bg-gray-300 hover:bg-gray-400 text-gray-700",google:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100",facebook:"bg-[#1877F2] hover:bg-[#155db2] text-white",apple:"bg-black hover:bg-gray-900 text-white"}[o]," ").concat(c);return(0,r.jsx)("button",{type:s,onClick:a,disabled:n,className:p,children:t})}},980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var r=a(43),s=a(16),o=a(216),l=a(892),i=a(899),n=a(835),c=a(383),d=a(916),m=a(832),p=a(58),u=a(579);const g={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"https://horse-shipt-frontend.vercel.app/api",x=()=>{const{login:e}=(0,s.A)(),t=(0,o.Zp)(),a=(0,o.zy)(),[x,h]=(0,r.useState)(null),[f,b]=(0,r.useState)(!1),y=i.Ik({email:i.Yj().email("Invalid email").required("Required"),password:i.Yj().required("Required"),role:i.Yj().oneOf(["shipper","customer"]).required("Required")});(0,r.useEffect)(()=>{const r=new URLSearchParams(a.search),s=r.get("error");s&&h({message:decodeURIComponent(s),type:"error"});const o=r.get("token");if(o){const a={_id:r.get("id"),role:r.get("role"),name:r.get("name"),email:r.get("email"),photo:r.get("photo")||"",provider:r.get("provider"),providerId:r.get("providerId"),firstName:r.get("firstName")||"",lastName:r.get("lastName")||"",locale:r.get("locale")||""},s={authToken:o,authUser:a,token:o,tokenExpiry:Date.now()+36e5};localStorage.setItem("authData",JSON.stringify(s)),e(a,o,3600),t("shipper"===a.role?"/shipper/dashboard":"/customer/dashboard")}},[a.search,e,t]);return(0,u.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-cover bg-center font-montserrat p-4",style:{backgroundImage:"url(".concat(m,")")},children:[(0,u.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center w-full max-w-6xl gap-20",children:[(0,u.jsx)("div",{className:"flex items-center justify-center w-full md:w-[450px] h-[150px]",children:(0,u.jsxs)("svg",{width:"120",height:"120",viewBox:"0 0 64 64",fill:"none",children:[(0,u.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"#E5E7EB"}),(0,u.jsx)("path",{d:"M32 16L40 32H24L32 16Z",fill:"#1E40AF"}),(0,u.jsx)("circle",{cx:"32",cy:"42",r:"4",fill:"#1E40AF"})]})}),(0,u.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-6 md:p-8 shadow-md flex flex-col justify-center w-full max-w-sm gap-4",children:[(0,u.jsx)("h1",{className:"text-xl sm:text-2xl font-semibold text-start text-gray-800",children:"Welcome Back"}),(0,u.jsxs)("p",{className:"text-xs text-gray-600",children:["Don't have an account?"," ",(0,u.jsx)("span",{className:"text-[#BF9B53] font-medium cursor-pointer px-2 py-1 rounded hover:bg-[#bf9b5360] hover:text-black",onClick:()=>t("/signup"),children:"Create an account"})]}),(0,u.jsx)(l.l1,{initialValues:{email:"",password:"",role:"shipper"},validationSchema:y,onSubmit:async(a,r)=>{let{setSubmitting:s}=r;b(!0);try{const r=await fetch("".concat(g,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await r.json();if(s.success){const a=s.data,r={authToken:a.token,authUser:{_id:a._id,role:a.role,name:a.name,email:a.email,photo:a.profilePicture||"",provider:a.provider,providerId:a.providerId,firstName:a.firstName||"",lastName:a.lastName||"",locale:a.locale||"",isLogin:a.isLogin,isActive:a.isActive},token:a.token,tokenExpiry:Date.now()+36e5};localStorage.setItem("authData",JSON.stringify(r)),e(a,a.token,3600),h({message:"Logged in successfully!",type:"info"}),t("shipper"===a.role?"/shipper/dashboard":"/customer/dashboard")}else{var o;h({message:(null===(o=s.errors)||void 0===o?void 0:o[0])||"Login failed",type:"error"})}}catch(l){console.error(l),h({message:"Login error",type:"error"})}finally{s(!1),b(!1)}},children:e=>{let{values:t,setFieldValue:a,isValid:r,dirty:s,isSubmitting:o}=e;return(0,u.jsxs)(l.lV,{className:"flex flex-col gap-3",children:[(0,u.jsx)(c.A,{label:"Email",type:"email",placeholder:"Enter your email",value:t.email,onChange:e=>a("email",e.target.value)}),(0,u.jsx)(l.Kw,{name:"email",component:"div",className:"text-xs text-red-500"}),(0,u.jsx)(c.A,{label:"Password",type:"password",placeholder:"Enter your password",value:t.password,onChange:e=>a("password",e.target.value)}),(0,u.jsx)(l.Kw,{name:"password",component:"div",className:"text-xs text-red-500"}),(0,u.jsx)("div",{className:"flex gap-2",children:["shipper","customer"].map(e=>(0,u.jsx)("button",{type:"button",className:"flex-1 py-1 text-xs font-medium rounded ".concat(t.role===e?"bg-[#BF9B53] text-white":"bg-gray-200 text-gray-700"),onClick:()=>a("role",e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,u.jsx)(l.Kw,{name:"role",component:"div",className:"text-xs text-red-500"}),(0,u.jsx)("div",{className:"flex justify-end",children:(0,u.jsx)(n.A,{type:"submit",disabled:!(r&&s)||o||f,className:"px-4 py-1.5 text-xs rounded-md ".concat(r&&s?"bg-[#BF9B53] text-white hover:bg-[#a6813f]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:f?"Logging in...":"Login"})}),(0,u.jsx)("div",{className:"flex flex-col gap-2 mt-3",children:(0,u.jsxs)(n.A,{className:"w-full flex items-center justify-center border border-gray-300 text-black gap-2 rounded-full text-xs py-1.5",onClick:()=>(e=>{const t="".concat(g,"/auth/google?role=").concat(e);window.location.href=t})(t.role),children:[(0,u.jsx)(p.F4b,{size:16})," Continue with Google"]})})]})}})]})]}),x&&(0,u.jsx)(d.A,{message:x.message,type:x.type,onClose:()=>h(null)})]})}}}]);
//# sourceMappingURL=980.dd8f8a36.chunk.js.map